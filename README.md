# TC_GINS

## 李代数法和传统法姿态表示与解算的个人理解

### 背景
在严恭敏的书和武大i2nav的讲义中，均是用的传统方法做的姿态递推，主要是计算**等效旋转矢量**，然后再用四元数或者旋转矩阵递推。传统方法在计算等效旋转矢量的过程中，有单子样方法、双子样方法等，其中单子样方法完全等价于**定轴转动**的假设。

在高翔的书中，姿态递推从来没提到过单双子样算法，而是用**李群和李代数**来递推的，具体来说，是SO3和so3。SO3李群就是旋转矩阵构成的群，so3李代数就是三维反对称矩阵和对应的李括号组成的，完全符合李代数的定义，在数据上其实完全等价于**角轴**。**角轴**也就是传统方法中的**旋转矢量**，**角轴，旋转矢量，李代数，在姿态表示上，其实是一个概念**。不同的是李代数里边处理姿态递推的方法不一样。传统方法通过单子样和多子样来计算等效旋转矢量，然后通过罗德里格斯公式递推姿态，但是李代数方法中通过指数映射(其实也是罗德里格斯公式)，将李代数(传统的旋转矢量)的变化映射到李群(传统的旋转矩阵)上，完成姿态递推。李代数方法不存在什么定轴转动的假设，也没有什么采样的说法，只是用到了李代数的加法映射到李群乘法中的**BCH公式**近似来实现。**BCH公式给出了李代数上操作加法小量与李群上操作乘法小量的关系**。简单而言，使用单子样计算的等效旋转矢量作为递推要加上的李代数小量，再用指数映射。其实计算过程是一模一样的。

既然一模一样，那为什么用李代数呢？因为传统方法在递推后，那个等效旋转矢量就完全没用了，等效旋转矢量仅仅作为一个中间变量。但在李代数方法中，指数映射到旋转矩阵后，还能对数映射回来。且可以通过BCH，将当前旋转R，递推的增量旋转dR，以及递推后的旋转dR*R，三者之间通过李代数也能链接。即

dR = Exp(dphi)
R = Exp(phi)
dR*R = Exp(dphi)*Exp(phi) = Exp(phi+Jl(phi) * dphi)

通过Jl建立李群和李代数之间的链接，而李代数是可以加法的，这样就能方便处理优化问题了。仅从递推的角度来说，两者没有什么区别。优化的时候就能对李代数一直加减步长，直到找到最优的姿态。
这才是BCH真正的用途。而并非是和传统的单子样多子样相对应。



<!-- $$
\begin{bmatrix}
\cos\theta & -\sin\theta & 0 \\
\sin\theta & \cos\theta & 0 \\
0 & 0 & 1
\end{bmatrix}
\begin{bmatrix}
\cos\phi & 0 & \sin\phi \\
0 & 1 & 0 \\
-\sin\phi & 0 & \cos\phi
\end{bmatrix}
\begin{bmatrix}
\cos\psi & -\sin\psi & 0 \\
\sin\psi & \cos\psi & 0 \\
0 & 0 & 1
\end{bmatrix}
=
\begin{bmatrix}
\cos(\theta+\phi+\psi) & -\sin(\theta+\phi+\psi) & 0 \\
\sin(\theta+\phi+\psi) & \cos(\theta+\phi+\psi) & 0 \\
0 & 0 & 1
\end{bmatrix}
$$ -->

但是李代数这里有个好处，相当于引入了旋转矢量的加法，也就是让优化问题有了可能。李代数(或者说角轴)是没有任何限制的，可以直接作为一个加法的扰动。